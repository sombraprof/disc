<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Portal de Disciplinas</title>

    

    <!-- Keep Tailwind and your custom CSS -->
    <link rel="stylesheet" href="../css/tailwind.css" />
    <link rel="stylesheet" href="../css/style.css" />

    <!-- Fonts and Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      crossorigin="anonymous"
    />

    <!-- Mobile nav color; JS will adjust on toggle -->
    <meta name="theme-color" content="#0b1220" />

    <!-- Pre-init theme to avoid flash -->
    <script>
      (function () {
        try {
          var prefix = window.APP_STORAGE_PREFIX || 'app';
          var saved = localStorage.getItem(prefix + ':theme');
          if (
            saved === 'dark' ||
            (!saved &&
              window.matchMedia &&
              window.matchMedia('(prefers-color-scheme: dark)').matches)
          ) {
            document.documentElement.classList.add('theme-dark');
          }
        } catch (e) {}
      })();
    </script>

    <style>
      /* ========== Design tokens (Light) ========== */
      :root {
        --bg: #f7f7fb;
        --text: #0f172a; /* slate-900 */
        --muted: #475569; /* slate-600 */
        --panel-bg: #ffffff;
        --panel-border: #e2e8f0;
        --accent: #3b82f6; /* blue-500 */
        --accent-soft-bg: #eff6ff; /* blue-50 */

        --radius-xl: 1rem;
        --shadow-md: 0 2px 10px rgba(0, 0, 0, 0.08);
        --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.25);

        --h1-size: clamp(2rem, 4vw, 3.5rem);
        --h2-size: clamp(1.25rem, 2.5vw, 1.75rem);
        --p-size: 1rem;

        /* Compact tokens (used when [data-density="compact"]) */
        --card-title-size-sm: clamp(1rem, 1.6vw, 1.125rem); /* ~16–18px */
        --card-code-size-sm: 0.75rem; /* 12px */
        --card-text-size-sm: 0.9rem; /* 14–15px */
        --card-pad-x-sm: 1rem;
        --card-pad-y-sm: 0.875rem;
      }

      /* ========== Dark override ========== */
      .theme-dark {
        --bg: #0b1220;
        --text: #e6edf3;
        --muted: #9aa4b2;
        --panel-bg: #111827; /* gray-900 */
        --panel-border: #1f2937; /* gray-800 */
        --accent: #60a5fa; /* blue-400 */
        --accent-soft-bg: rgba(96, 165, 250, 0.12);
      }

      /* Base */
      html,
      body {
        height: 100%;
      }
      body {
        font-family:
          'Inter',
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          'Helvetica Neue',
          Arial,
          'Noto Sans',
          'Apple Color Emoji',
          'Segoe UI Emoji',
          'Segoe UI Symbol',
          sans-serif;
        background: var(--bg);
        color: var(--text);
        transition:
          background-color 0.2s ease,
          color 0.2s ease;
        min-height: 100vh;
        padding: 2rem 1rem;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      /* Title & subtitle */
      .app-title {
        font-size: var(--h1-size);
        color: var(--text);
      }
      .app-subtitle {
        color: var(--muted);
        margin-bottom: 3rem;
      }

      /* Card (base) */
      .card {
        border-left: 4px solid var(--accent);
        background: var(--panel-bg);
        border: 1px solid var(--panel-border);
        border-radius: var(--radius-xl);
        padding: 1rem;
        transition:
          transform 0.2s ease,
          box-shadow 0.2s ease,
          border-color 0.2s ease;
        cursor: pointer;
        text-decoration: none;
        display: block;
        min-height: 120px;
        position: relative;
        overflow: hidden;
        box-shadow: var(--shadow-md);
      }
      .card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-lg);
        border-color: var(--accent);
      }
      .card:focus-visible,
      .theme-toggle:focus-visible {
        outline: 3px solid var(--accent);
        outline-offset: 3px;
        border-radius: calc(var(--radius-xl) + 3px);
      }
      .card h2 {
        color: var(--text);
        font-size: var(--h2-size);
        font-weight: 700;
        margin-bottom: 0.5rem;
        line-height: 1.2;
      }
      .card p {
        color: var(--muted);
        font-size: var(--p-size);
        line-height: 1.5;
        margin-bottom: 0.75rem;
      }
      .card .card-badge {
        position: absolute;
        top: 0.75rem;
        right: 0.75rem;
        background: var(--accent);
        color: #fff;
        padding: 0.25rem 0.6rem;
        border-radius: 0.5rem;
        font-size: 0.75rem;
        font-weight: 700;
        letter-spacing: 0.03em;
      }

      /* Theme toggle button */
      .theme-toggle {
        background: var(--panel-bg);
        border: 1px solid var(--panel-border);
        color: var(--text);
        border-radius: 0.75rem;
        padding: 1rem;
        transition:
          transform 0.12s ease,
          background-color 0.2s ease,
          border 0.2s ease,
          box-shadow 0.2s ease;
        width: 3.25rem;
        height: 3.25rem;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        box-shadow: var(--shadow-md);
      }
      .theme-toggle:hover {
        background: var(--accent-soft-bg);
        border-color: var(--accent);
        transform: scale(1.05);
      }

      .loading-spinner {
        display: inline-block;
        width: 1rem;
        height: 1rem;
        border: 2px solid var(--panel-border);
        border-radius: 50%;
        border-top-color: var(--accent);
        animation: spin 1s ease-in-out infinite;
      }

      @media (prefers-reduced-motion: reduce) {
        .card,
        .theme-toggle {
          transition: none;
        }
        .card:hover {
          transform: none;
        }
        .loading-spinner {
          animation: none;
        }
      }
      @media (max-width: 768px) {
        body {
          padding: 1rem 0.5rem;
        }
        .card {
          padding: 1rem;
        }
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* ========== COMPACT PRESET (applied when data-density="compact") ========== */
      /* English comments: Compact preset reduces paddings, minimum height and font sizes
         for all cards inside the container without changing your home.js. */

      /* Container flag: <div id="disciplines-container" data-density="compact"> */
      [data-density='compact'] .card {
        padding: var(--card-pad-y-sm) var(--card-pad-x-sm) !important;
        min-height: auto !important; /* remove height inflation */
        border-left-width: 3px; /* slimmer accent bar */
      }
      /* Generic fallback: shrink default h2/p even if you don't add class names */
      [data-density='compact'] .card h2 {
        font-size: var(--card-title-size-sm);
        line-height: 1.2;
        margin: 0.25rem 0 0.25rem;
      }
      [data-density='compact'] .card p {
        font-size: var(--card-text-size-sm);
        margin-top: 0.25rem;
        margin-bottom: 0.5rem;
      }

      /* Optional fine-tuned classes if you want explicit control in markup */
      .card--sm {
        padding: var(--card-pad-y-sm) var(--card-pad-x-sm) !important;
        min-height: auto !important;
        border-left-width: 3px;
      }
      .card-title {
        font-size: var(--card-title-size-sm);
        line-height: 1.2;
        margin: 0.25rem 0 0.25rem;
      }
      .card-title.line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      .card-code {
        font-size: var(--card-code-size-sm);
        font-weight: 600;
        color: var(--muted);
        letter-spacing: 0.02em;
        margin: 0;
      }
      .card-desc {
        font-size: var(--card-text-size-sm);
        color: var(--muted);
        margin-top: 0.35rem;
      }

      /* Compact badge */
      [data-density='compact'] .card .card-badge {
        font-size: 0.7rem;
        padding: 0.15rem 0.5rem;
        top: 0.5rem;
        right: 0.5rem;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <!-- Header: title on the left, theme button on the right -->
      <header class="pt-8 pb-4 md:pt-16 md:pb-8 mb-16">
        <div class="flex items-center justify-between gap-4 mb-8">
          <h1 class="app-title font-bold">Portal de Disciplinas</h1>

          <button
            id="home-theme-toggle"
            aria-pressed="false"
            title="Alternar tema"
            aria-label="Alternar tema"
            class="inline-flex items-center justify-center w-10 h-10 rounded bg-slate-800 text-white hover:bg-slate-700"
          >
            <i class="fa-solid fa-moon"></i>
          </button>
        </div>

        <p class="app-subtitle text-2xl">Selecione uma disciplina para acessar os materiais</p>
      </header>

      <main>
        <div
          id="disciplines-container"
          class="flex flex-col space-y-4"
        >
          <!-- Cards serão inseridos aqui pelo /js/home.js -->
          <!-- Dica: se quiser controle fino por card, pode gerar a estrutura assim:
          <a class="card card--sm" href="#disciplina=ALGI" aria-labelledby="algi-t" aria-describedby="algi-d">
            <p class="card-code">ALGI</p>
            <h2 id="algi-t" class="card-title line-clamp-2">Algoritmos e Estruturas de Dados</h2>
            <p id="algi-d" class="card-desc">14 aulas • Presencial</p>
          </a>
          -->
        </div>
      </main>

      <footer class="mt-20 text-center">
        <p class="text-lg app-subtitle" role="status" aria-live="polite">
          <span class="loading-spinner mr-3" aria-hidden="true"></span>
          Carregando lista de disciplinas...
        </p>
      </footer>
    </div>

    <!-- Use your previous loader again -->
    <script type="module" src="/js/home.js"></script>

    <!-- Theme toggle script using project standard -->
    <script type="module">
      import { setupTheme } from '/js/modules/theme.js';

      // Override the button ID for home page
      document.addEventListener('DOMContentLoaded', function () {
        const originalBtn = document.getElementById('theme-toggle');
        const homeBtn = document.getElementById('home-theme-toggle');

        if (homeBtn && !originalBtn) {
          // Temporarily change ID to match what theme.js expects
          homeBtn.id = 'theme-toggle';
          setupTheme();
          // Restore original ID
          homeBtn.id = 'home-theme-toggle';
        } else {
          setupTheme();
        }
      });
    </script>
  </body>
</html>
